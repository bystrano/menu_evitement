function ajouterItem() {
    var nbItems = $('fieldset').length,
        url_saisie_menu = '#URL_PAGE{ajax/saisie-menu-item}';

    $.ajax({
        'url': parametre_url(url_saisie_menu, 'no', nbItems),
        'success': function (data) {
            var structures = $('#structures').append(data);
            initBoutonEffacer(nbItems, structures.find('fieldset .bouton-effacer')[nbItems]);
        }
    });
}

function initBoutonEffacer (index, bouton) {

    $(bouton).append('<a href="#bouton-effacer-' + index + '" name="bouton-effacer-'+ index +'" title="Efface definitivement">effacer</a>')
        .mouseup(function () {
            $(this).parents('fieldset')
                .hide()
                .find('input')
                .attr('value', '');
        });
}

$(function () {

    $('#bouton-ajouter')
        .append('<a href="#bouton-ajouter" name="bouton-ajouter" title="ajouter un element au menu">Plus</a>')
        .find('a').mouseup(function () {
            ajouterItem();
        });

    $('.bouton-effacer').each(initBoutonEffacer);

});
